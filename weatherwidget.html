<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ankara Hava Durumu Widget</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; min-height: 100vh; display: flex; align-items: center; justify-content: center; }
.widget-container {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    max-width: 800px;
    width: 100%;
    overflow: hidden;
    backdrop-filter: blur(10px);
    display: flex;
    flex-direction: row;
    min-height: 200px;
}
.widget-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 15px;
    color: white;
    position: relative;
    overflow: hidden;
    border-radius: 20px 0 0 20px;
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    min-width: 200px;
}
.weather-animation { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
.rain-drop { position: absolute; width: 2px; height: 20px; background: linear-gradient(transparent, rgba(255,255,255,0.6)); animation: rain-fall linear infinite; }
@keyframes rain-fall { to { transform: translateY(200px); } }
.snow-flake { position: absolute; width: 10px; height: 10px; background: white; border-radius: 50%; animation: snow-fall linear infinite; }
@keyframes snow-fall { to { transform: translateY(200px) rotate(360deg); } }
.sun-rays { position: absolute; top: 50%; right: 20px; width: 60px; height: 60px; animation: rotate 20s linear infinite; font-size: 40px; }
@keyframes rotate { to { transform: rotate(360deg); } }
.district-selector select {
    width: 100%; padding: 6px 12px; border: none; border-radius: 10px; background: rgba(255,255,255,0.2); color: white; cursor: pointer; outline: none;
}
.current-temp { font-size: 36px; font-weight: bold; }
.weather-icon-main { font-size: 40px; }
.weather-desc { font-size: 12px; margin-top: 5px; text-align: center; }
.detail-item { display: flex; align-items: center; gap: 4px; font-size: 11px; }
.api-notice { background: rgba(255,255,255,0.2); padding: 5px; border-radius: 5px; font-size: 8px; margin-top: 5px; text-align: center; }
.widget-body { padding: 15px; flex: 2; display: flex; flex-direction: column; border-radius: 0 20px 20px 0; }
.section-title { font-size: 14px; font-weight: bold; color: #333; margin-bottom: 10px; }
.hourly-forecast { display: flex; gap: 8px; overflow-x: auto; padding: 5px 0; margin-bottom: 10px; flex: 1; }
.hourly-forecast::-webkit-scrollbar { height: 4px; }
.hourly-forecast::-webkit-scrollbar-thumb { background: #667eea; border-radius: 10px; }
.hour-card { min-width: 60px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; padding: 8px; text-align: center; color: white; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
.hour-card:hover { transform: translateY(-2px); }
.daily-forecast { display: flex; gap: 8px; overflow-x: auto; padding: 5px 0; }
.day-card { min-width: 80px; background: linear-gradient(135deg, rgba(102,126,234,0.1) 0%, rgba(118,75,162,0.1) 100%); border-radius: 10px; padding: 10px; text-align: center; border: 1px solid transparent; }
.day-card:hover { border-color: #667eea; transform: translateY(-2px); }
.loading { text-align: center; padding: 10px; font-size: 12px; color: #667eea; }
</style>
</head>
<body>

<div class="widget-container">
    <div class="widget-header">
        <div class="weather-animation" id="weatherAnimation"></div>
        <div class="district-selector">
            <select id="districtSelect">
                <option value="Etimesgut">Etimesgut</option>
                <option value="Çankaya">Çankaya</option>
                <option value="Keçiören">Keçiören</option>
                <option value="Mamak">Mamak</option>
                <option value="Yenimahalle">Yenimahalle</option>
                <option value="Altındağ">Altındağ</option>
                <option value="Sincan">Sincan</option>
                <option value="Pursaklar">Pursaklar</option>
                <option value="Gölbaşı">Gölbaşı</option>
                <option value="Polatlı">Polatlı</option>
                <option value="Ankara Merkez">Ankara Merkez</option>
            </select>
        </div>
        <div class="current-weather">
            <div>
                <div class="current-temp" id="currentTemp">--°</div>
                <div class="weather-desc" id="weatherDesc">Yükleniyor...</div>
            </div>
            <div class="weather-icon-main" id="mainIcon">Cloud</div>
        </div>
        <div class="weather-details">
            <div class="detail-item">Humidity <span id="humidity">--%</span></div>
            <div class="detail-item">Wind <span id="wind">-- km/s</span></div>
            <div class="detail-item">Rain <span id="rainChance">--%</span></div>
        </div>
        <div class="api-notice">WeatherAPI.com</div>
    </div>
    <div class="widget-body">
        <div class="section-title">Saatlik</div>
        <div class="hourly-forecast" id="hourlyForecast"><div class="loading">Yükleniyor...</div></div>
        <div class="section-title">Günlük</div>
        <div class="daily-forecast" id="dailyForecast"><div class="loading">Yükleniyor...</div></div>
    </div>
</div>

<script>
const API_KEY = 'cd6435a221fb4a71881124700252110';
const BASE_URL = 'https://api.weatherapi.com/v1';

function getWeatherIcon(code, isDay) {
    const icons = {
        1000: isDay ? 'Sun' : 'Moon', 1003: 'Cloud-Sun', 1006: 'Cloud', 1009: 'Cloud',
        1030: 'Fog', 1063: 'Cloud-Rain', 1180: 'Rain', 1183: 'Rain', 1195: 'Heavy-Rain',
        1210: 'Snow', 1240: 'Rain', 1273: 'Thunder', 1276: 'Thunder-Rain'
    };
    return icons[code] || 'Cloud';
}

function createWeatherAnimation(code, el) {
    el.innerHTML = '';
    if (code >= 1180 && code <= 1246) {
        for (let i = 0; i < 30; i++) {
            const drop = document.createElement('div');
            drop.className = 'rain-drop';
            drop.style.left = Math.random() * 100 + '%';
            drop.style.animationDuration = (Math.random() * 0.5 + 0.5) + 's';
            drop.style.animationDelay = Math.random() * 2 + 's';
            el.appendChild(drop);
        }
    } else if (code >= 1210 && code <= 1225) {
        for (let i = 0; i < 20; i++) {
            const flake = document.createElement('div');
            flake.className = 'snow-flake';
            flake.style.left = Math.random() * 100 + '%';
            flake.style.animation
